<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <meta name="monetag" content="ce90a38d9f639d5c89f345df501c55f7">
    
    <title>BRAINROT // MONEY</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        :root { --main: #00f3ff; --glow: #00f3ff; --bg: #050505; }
        body {
            margin: 0; background-color: var(--bg);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            height: 100vh; overflow: hidden; user-select: none; -webkit-tap-highlight-color: transparent;
            font-family: 'Share Tech Mono', monospace; cursor: crosshair; touch-action: none;
            transition: background-color 0.5s;
        }

        /* --- SKINS --- */
        .skin-base { --main: #00f3ff; --glow: #00f3ff; }
        .skin-gold { --main: #FFD700; --glow: #FFD700; background-image: radial-gradient(circle, #222 10%, #000 90%); }
        .skin-gold #fill { background: linear-gradient(45deg, #FFD700, #FDB931, #FFD700); background-size: 200% 200%; animation: shine 2s infinite linear; }
        .skin-plasma { --main: #ff00ff; --glow: #bc13fe; }
        .skin-plasma #fill { background: linear-gradient(0deg, #ff00ff, #00ffff); background-size: 100% 200%; animation: plasmaFlow 0.5s infinite alternate; }
        .skin-diamond { --main: #e0ffff; --glow: #ffffff; }
        .skin-diamond #fill { background: repeating-linear-gradient(45deg, #ccffff, #ccffff 10px, #ffffff 10px, #ffffff 20px); opacity: 0.9; }
        .skin-god { --main: #000; --glow: #fff; --bg: #fff; }
        .skin-god #game-container { border-color: #000 !important; background: #fff !important; }
        .skin-god #fill { background: #000 !important; box-shadow: 0 0 20px #000; }
        .skin-god .stats, .skin-god #score-display { color: #000 !important; }

        @keyframes shine { 0% {background-position: 0% 50%} 100% {background-position: 100% 50%} }
        @keyframes plasmaFlow { 0% {background-position: 0% 0%} 100% {background-position: 0% 100%} }

        /* --- UI --- */
        .scanlines { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: linear-gradient(rgba(0,0,0,0) 50%, rgba(0,0,0,0.2) 50%); background-size: 100% 4px; pointer-events: none; z-index: 99; opacity: 0.7; }
        .stats { position: absolute; top: 8%; width: 100%; display: flex; justify-content: center; gap: 50px; color: #666; font-size: 0.9rem; letter-spacing: 2px; text-transform: uppercase; z-index: 10; }
        .stat-val { display: block; font-size: 1.8rem; color: #fff; font-family: 'Audiowide'; text-shadow: 0 0 10px rgba(255,255,255,0.2); }
        
        #game-container { position: relative; width: 150px; height: 360px; background: rgba(10,10,10,0.95); border: 3px solid #333; border-radius: 6px; box-shadow: 0 0 60px rgba(0,0,0,0.6); overflow: hidden; z-index: 20; transition: box-shadow 0.3s, border-color 0.3s; }
        #target-zone { position: absolute; top: 0; left: 0; width: 100%; height: 4px; background: #fff; box-shadow: 0 0 15px #fff; z-index: 30; }
        #fill { position: absolute; bottom: 0; left: 0; width: 100%; height: 0%; background: var(--main); box-shadow: 0 0 40px var(--glow); will-change: height; }
        #score-display { margin-top: 30px; font-size: 6rem; font-family: 'Audiowide'; color: rgba(255,255,255,0.05); z-index: 5; transition: 0.1s; }
        #msg { position: absolute; font-family: 'Audiowide'; font-size: 4rem; color: #fff; opacity: 0; pointer-events: none; z-index: 100; white-space: nowrap; text-shadow: 0 5px 0 #000; mix-blend-mode: overlay; top: 20%; }
        #unlock-msg { position: absolute; top: 40%; width: 100%; text-align: center; font-family: 'Audiowide'; font-size: 2rem; color: #fff; text-transform: uppercase; letter-spacing: 4px; opacity: 0; pointer-events: none; z-index: 200; text-shadow: 0 0 20px var(--glow); transform: scale(0); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        
        canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 50; }
        .shake { animation: shake 0.3s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-2px, 0, 0); } 20%, 80% { transform: translate3d(4px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-6px, 0, 0); } 40%, 60% { transform: translate3d(6px, 0, 0); } }
    </style>
</head>
<body class="skin-base">
    <div class="scanlines"></div>
    <canvas id="particles"></canvas>
    <div class="stats">
        <div>Streak<span class="stat-val" id="streak-val">0</span></div>
        <div>Best<span class="stat-val" id="best-val">0</span></div>
    </div>
    <div id="msg">PERFECT</div>
    <div id="unlock-msg">SKIN UNLOCKED<br><span id="skin-name" style="font-size:1.5rem; color:var(--main)">GOLD</span></div>
    <div id="game-container">
        <div id="target-zone"></div>
        <div id="fill"></div>
    </div>
    <div id="score-display">0</div>

    <script>
        // --- AUDIO ENGINE ---
        const AudioCtx = window.AudioContext || window.webkitAudioContext;
        let ctx = new AudioCtx(); let osc = null, gain = null;

        function playRise() {
            if(ctx.state === 'suspended') ctx.resume();
            if(osc) stopSound();
            osc = ctx.createOscillator(); gain = ctx.createGain();
            osc.connect(gain); gain.connect(ctx.destination);
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, ctx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(1000, ctx.currentTime + 2.5);
            gain.gain.setValueAtTime(0.04, ctx.currentTime);
            osc.start();
        }
        function stopSound() {
            if(osc) {
                const t = ctx.currentTime;
                gain.gain.exponentialRampToValueAtTime(0.001, t + 0.1);
                osc.stop(t + 0.1); osc = null;
            }
        }
        function playWin(streak) {
            stopSound();
            const o = ctx.createOscillator(); const g = ctx.createGain();
            o.connect(g); g.connect(ctx.destination);
            o.type = streak >= 10 ? 'triangle' : 'sine';
            let freq = 440 + (streak * 20); 
            if(streak >= 10) freq = 880;
            o.frequency.setValueAtTime(freq, ctx.currentTime);
            o.frequency.exponentialRampToValueAtTime(freq*1.5, ctx.currentTime + 0.2);
            g.gain.setValueAtTime(0.2, ctx.currentTime);
            g.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.5);
            o.start(); o.stop(ctx.currentTime + 0.5);
        }
        function playUnlock() {
            const o = ctx.createOscillator(); const g = ctx.createGain();
            o.connect(g); g.connect(ctx.destination);
            o.type = 'square';
            o.frequency.setValueAtTime(200, ctx.currentTime);
            o.frequency.linearRampToValueAtTime(800, ctx.currentTime + 0.1);
            o.frequency.linearRampToValueAtTime(1200, ctx.currentTime + 0.3);
            g.gain.setValueAtTime(0.1, ctx.currentTime);
            g.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.6);
            o.start(); o.stop(ctx.currentTime + 0.6);
        }

        // --- VARIABLES ---
        const container = document.getElementById('game-container');
        const fill = document.getElementById('fill');
        const scoreEl = document.getElementById('score-display');
        const streakEl = document.getElementById('streak-val');
        const bestEl = document.getElementById('best-val');
        const unlockEl = document.getElementById('unlock-msg');
        const skinNameEl = document.getElementById('skin-name');

        let isHolding = false;
        let height = 0;
        let streak = 0;
        let hasRevived = false;
        let best = localStorage.getItem('br_evo_best') || 0;
        bestEl.innerText = best;
        let animId;

        // --- ICI: METS TON LIEN D'ARGENT ---
        // Une fois ton site vÃ©rifiÃ© avec la balise, Monetag te donnera ton "Direct Link"
        // Tu viendras le coller ici Ã  la place de Google.
        const MONEY_LINK = "https://www.google.com"; 

        // --- SKINS ---
        function checkCosmetics(s) {
            document.body.className = 'skin-base';
            if (s >= 100) { applySkin('skin-god', "ANTIMATTER"); return; }
            if (s >= 50)  { applySkin('skin-diamond', "DIAMOND"); return; }
            if (s >= 20)  { applySkin('skin-plasma', "PLASMA"); return; }
            if (s >= 10)  { applySkin('skin-gold', "GOLD"); return; }
        }
        function applySkin(className, name) {
            document.body.className = className;
            if (streak === 10 || streak === 20 || streak === 50 || streak === 100) {
                showUnlock(name); playUnlock();
            }
        }
        function showUnlock(name) {
            skinNameEl.innerText = name; unlockEl.style.opacity = 1; unlockEl.style.transform = "scale(1)";
            setTimeout(() => { unlockEl.style.opacity = 0; unlockEl.style.transform = "scale(0)"; }, 1500);
        }

        // --- CORE ---
        const start = (e) => {
            if(e.cancelable) e.preventDefault();
            if(isHolding) return;
            isHolding = true; height = 0; fill.style.height = '0%'; playRise();
            container.style.borderColor = getComputedStyle(document.body).getPropertyValue('--main');
            let speed = 1.3 + (streak * 0.1); 
            let accel = Math.random() > 0.5 ? 1.02 : 1.04;

            const loop = () => {
                if(!isHolding) return;
                speed *= accel; height += speed; fill.style.height = `${Math.min(height, 100)}%`;
                if(height > 100) fill.style.filter = "brightness(500%)";
                else fill.style.filter = "none";
                if(height > 125) fail("âŒ"); 
                else animId = requestAnimationFrame(loop);
            };
            animId = requestAnimationFrame(loop);
        };

        const stop = (e) => {
            if(e.cancelable) e.preventDefault();
            if(!isHolding) return;
            isHolding = false; cancelAnimationFrame(animId); stopSound();
            let diff = Math.abs(100 - height);
            let tolerance = Math.max(1.5, 6 - (streak * 0.25));
            if(diff <= tolerance) win();
            else fail("âŒ"); 
        };

        document.addEventListener('mousedown', start);
        document.addEventListener('touchstart', start, {passive: false});
        document.addEventListener('mouseup', stop);
        document.addEventListener('touchend', stop);

        function win() {
            streak++; hasRevived = false; 
            if(streak > best) { best = streak; localStorage.setItem('br_evo_best', best); bestEl.innerText = best; }
            scoreEl.innerText = streak; streakEl.innerText = streak; scoreEl.style.color = "var(--main)";
            playWin(streak); checkCosmetics(streak); spawnParticles(); showMsg("PERFECT");
            setTimeout(() => { if(!isHolding) { fill.style.height = '0%'; fill.style.filter = "none"; } }, 500);
        }

        // --- MONEY SYSTEM ---
        function fail(reason) {
            if (streak >= 5 && !hasRevived) {
                let choice = confirm(`ðŸ’€ STREAK DE ${streak} PERDU !\n\nSauver le score ?\n(Clique OK, une page va s'ouvrir, ferme-la et reviens vite)`);
                
                if(choice) {
                    hasRevived = true;
                    window.open(MONEY_LINK, '_blank');
                    showMsg("WAIT...", false);
                    setTimeout(() => {
                        container.classList.remove('shake');
                        fill.style.height = '0%';
                        fill.style.filter = "none";
                        showMsg("REVIVED!", false);
                    }, 1000);
                    return; 
                }
            }
            triggerGameOver(reason);
        }

        function triggerGameOver(reason) {
            streak = 0; scoreEl.innerText = "0"; streakEl.innerText = "0"; scoreEl.style.color = "#333";
            document.body.className = 'skin-base'; 
            container.classList.add('shake'); showMsg(reason, true);
            setTimeout(() => { container.classList.remove('shake'); fill.style.height = '0%'; fill.style.filter = "none"; }, 300);
        }

        function showMsg(text, isFail=false) {
            const m = document.getElementById('msg');
            m.innerText = text; m.style.opacity = 1; m.style.color = isFail ? '#ff3333' : '#fff'; m.style.top = isFail ? '25%' : '20%';
            setTimeout(() => m.style.opacity = 0, 600);
        }

        // --- SECRET CHEAT CODE (Tape "RICH") ---
        let secretCode = ['r','i','c','h']; let codePosition = 0;
        document.addEventListener('keydown', function(e) {
            if (e.key.toLowerCase() === secretCode[codePosition]) {
                codePosition++;
                if (codePosition === secretCode.length) {
                    activateGodMode(); codePosition = 0;
                }
            } else { codePosition = 0; }
        });
        function activateGodMode() {
            applySkin('skin-god', "HACKER MODE"); playUnlock();
            document.body.style.filter = "invert(1)";
            setTimeout(() => document.body.style.filter = "none", 200);
            alert("ðŸ’¸ MODE HACKER ACTIVÃ‰ : Tu as payÃ©, tu as gagnÃ©.");
        }

        // --- PARTICLES ---
        const canvas = document.getElementById('particles');
        const c = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        let particles = [];
        function spawnParticles() {
            const color = getComputedStyle(document.body).getPropertyValue('--main');
            for(let i=0; i<40; i++) { particles.push({ x: window.innerWidth/2, y: window.innerHeight/2 + 100, vx: (Math.random()-0.5)*20, vy: (Math.random()-0.5)*20, life: 1, color: color }); }
        }
        function loopParticles() {
            c.clearRect(0,0,canvas.width,canvas.height);
            particles.forEach((p,i) => { p.x+=p.vx; p.y+=p.vy; p.life-=0.04; c.fillStyle=p.color; c.globalAlpha=p.life; c.beginPath(); c.arc(p.x,p.y,3,0,Math.PI*2); c.fill(); if(p.life<=0) particles.splice(i,1); });
            requestAnimationFrame(loopParticles);
        }
        loopParticles();
    </script>
</body>
</html>
